changes to piklab
*Add upp.cpp to src/progs/direct/base/Makefile.am
*add the files upp.cpp and upp.h to src/progs/direct/base
*Add these lines to src/progs/direct/base/direct.cpp
//on top
#include "common/port/usb_port.h"
#include "upp.h"

//on line 164
Direct::UsbHardware::UsbHardware(::Programmer::Base &base, const QString &portDevice, const HardwareData &data)
  : Hardware(base, new Port::UPP( base), data)
{}


*add these lines to src/progs/direct/base/direct_prog_config.cpp on line 79
  { { "Usbpicprog",              I18N_NOOP("Usbpicprog"),              I18N_NOOP("http://usbpicprog.sourceforge.net") },
    { Port::USBType,   { {   1,  7,  5,  3,  4,  8 },  0 } } },

*add these lines to src/progs/direct/base/direct.h on line 88
class UsbHardware : public Hardware
{
public:
  UsbHardware(::Programmer::Base &base, const QString &portDevice, const HardwareData &data);
};

*in src/progs/direct/base/direct_prog.cpp on line 58 change this
//old line 58
  else hardware = new ParallelHardware(base, hd.port.device, *hdata);
//new line 58 and 59
  else if ( hd.port.type==Port::ParallelType ) hardware = new ParallelHardware(base, hd.port.device, *hdata);
  else hardware = new UsbHardware(base, hd.port.device, *hdata);

*in src/progs/direct/base/direct_prog.h on line 64 change this
//old line 64
  virtual bool isPortSupported(Port::Type type) const { return ( type==Port::SerialType || type==Port::ParallelType ); }
//new line 64
  virtual bool isPortSupported(Port::Type type) const { return ( type==Port::SerialType || type==Port::ParallelType || type==Port::USBType ); }

*in src/progs/direct/gui/direct_config_widget.cpp on line 197 change this
//old line 197
  else _hardware = new ParallelHardware(_base, pd.device, hdata);
//new line 197 / 198
  else if ( pd.type==Port::ParallelType ) _hardware = new ParallelHardware(_base, pd.device, hdata);
  else _hardware = new UsbHardware(_base, pd.device, hdata);

